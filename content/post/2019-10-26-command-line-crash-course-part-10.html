---
title: "Command Line - Execute R from the Shell"
author: Aravind Hebbali
twitterImg: /img/cline_cover_image.png
description: "Getting Started with the Command Line"
date: '2019-10-26'
slug: command-line-execute-R-from-the-shell
categories:
  - bash
tags:
  - bash
  - shell
  - terminal
  - cli
---



<p><img src="/img/cline_cover_image.png" width="70%" style="display: block; margin: auto;" /></p>
<p>In this tutorial, you will be introduced to the command line. We have selected a set of commands we think will be useful in general to a wide range of audience.
We have created a <a href="https://rstudio.cloud/project/518720">RStudio Cloud Project</a> to ensure that all readers are using the same environment while going through the tutorial. Our goal was to ensure that after completing this tutorial, readers should be able to use the shell for version control, managing cloud services (like deploying your own shiny server etc.), execute commands in R &amp; RMarkdown and execute R scripts in the shell. Apart from learning shell commands, the tutorial will also focus on</p>
<ul>
<li>exploring R release names</li>
<li>mapping shell commands to R functions</li>
<li>RStudio Terminal</li>
<li>executing shell commands from R using <code>system2()</code> or <code>processx::run()</code></li>
<li>execute shell commands in RMarkdown</li>
<li>execute R scripts in the shell</li>
</ul>
<p>If you want a deeper understanding of using command line for data science, we suggest you read <a href="https://www.datascienceatthecommandline.com/">Data Science at the Command Line</a>. <a href="https://software-carpentry.org/">Software Carpentry</a> too has a lesson on <a href="https://swcarpentry.github.io/shell-novice/">shell</a>. We have listed more references at the end of the tutorial for the benefit of the readers.</p>
<div id="resources" class="section level2">
<h2>Resources</h2>
<p>Below are the links to all the resources related to this post:</p>
<ul>
<li><a href="https://slides.rsquaredacademy.com/github/shell.pdf" target="_blank">Slides</a></li>
<li><a href="https://github.com/rsquaredacademy-education/online-courses/" target="_blank">Code &amp; Data</a></li>
<li><a href="https://rstudio.cloud/project/518720" target="_blank">RStudio Cloud</a></li>
</ul>
<p>You can try our <strong>free online course</strong> <a href="https://rsquared-academy.thinkific.com/courses/command-line-basics-for-r-users"><strong>Command Line Basics for R Users</strong></a> if you prefer to learn through self paced online courses or our <a href="https://bash-intro.rsquaredacademy.com"><strong>ebook</strong></a> if you like to read the tutorial in a book format.</p>
</div>
<div id="rinshell" class="section level2">
<h2>R in the Shell</h2>
<p>In this section, we will learn to execute R commands and scripts in the command line using:</p>
<ul>
<li><code>R -e</code></li>
<li><code>Rscript -e</code></li>
<li><code>R CMD BATCH</code></li>
</ul>
<p>The <code>-e</code> option allows us to specify R expression(s). <code>R -e</code> will launch R and then execute the code specified within quotes. Use semi-colon to execute multiple expressions as shown below. You will be able to run the below commands only if you are able to launch R from the command line. Windows users need to ensure that R is added to the path environment.</p>
<pre class="sh"><code>R -e &quot;head(mtcars); tail(mtcars)&quot;</code></pre>
<pre><code>## 
## R version 3.6.2 (2019-12-12) -- &quot;Dark and Stormy Night&quot;
## Copyright (C) 2019 The R Foundation for Statistical Computing
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## 
## R is free software and comes with ABSOLUTELY NO WARRANTY.
## You are welcome to redistribute it under certain conditions.
## Type &#39;license()&#39; or &#39;licence()&#39; for distribution details.
## 
##   Natural language support but running in an English locale
## 
## R is a collaborative project with many contributors.
## Type &#39;contributors()&#39; for more information and
## &#39;citation()&#39; on how to cite R or R packages in publications.
## 
## Type &#39;demo()&#39; for some demos, &#39;help()&#39; for on-line help, or
## &#39;help.start()&#39; for an HTML browser interface to help.
## Type &#39;q()&#39; to quit R.
## 
## &gt; head(mtcars); tail(mtcars)
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
##                 mpg cyl  disp  hp drat    wt qsec vs am gear carb
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
## Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
## Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2
## &gt; 
## &gt;</code></pre>
<p><code>Rscript -e</code> will run code without launching R.</p>
<pre class="sh"><code>Rscript -e &quot;head(mtcars)&quot;</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>We can use <code>Rscript</code> to execute a R script as well. In the below example, we execute the code in <code>analysis.R</code> file.</p>
<pre class="sh"><code>Rscript analysis.R</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p>If you are more interested, try the <a href="https://cran.r-project.org/package=littler">littler</a> package as well.</p>
<div id="what-we-have-not-covered" class="section level3">
<h3>What we have not coveredâ€¦</h3>
<ul>
<li>shell scripting</li>
<li>editing files</li>
<li>file permissions</li>
<li>user information</li>
<li>pipes</li>
<li>awk</li>
<li>sed</li>
</ul>
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<ul>
<li>Shell is a text based application for viewing, handling and manipulating files</li>
<li>It is also known by the following names
<ul>
<li>CLI (Command Line Inteface)</li>
<li>Terminal</li>
<li>Bash (Bourne Again Shell)</li>
</ul></li>
<li>Use <code>system2()</code> and <code>processx::run()</code> in R to execute shell commands</li>
<li>Use <code>Rscript -e</code> or <code>R -e</code> to execute R scripts from the command line</li>
<li>RStudio includes a Terminal (from version 1.1.383)</li>
<li>Execute commands from shell script in RStudio using Ctrl + Enter</li>
<li>RMarkdown supports <code>bash</code>, <code>sh</code> and <code>awk</code></li>
</ul>
</div>
<div id="references" class="section level2">
<h2>References &amp; Further Readings</h2>
<ul>
<li><a href="https://tldr.sh/" class="uri">https://tldr.sh/</a></li>
<li><a href="https://blog.rstudio.com/2017/08/11/rstudio-v1-1-preview-terminal/" class="uri">https://blog.rstudio.com/2017/08/11/rstudio-v1-1-preview-terminal/</a></li>
<li><a href="https://support.rstudio.com/hc/en-us/articles/115010737148-Using-the-RStudio-Terminal" class="uri">https://support.rstudio.com/hc/en-us/articles/115010737148-Using-the-RStudio-Terminal</a></li>
<li><a href="https://bookdown.org/yihui/rmarkdown/language-engines.html#shell-scripts" class="uri">https://bookdown.org/yihui/rmarkdown/language-engines.html#shell-scripts</a></li>
<li><a href="https://github.com/kirillseva/tldrrr" class="uri">https://github.com/kirillseva/tldrrr</a></li>
<li><a href="https://fs.r-lib.org/articles/function-comparisons.html" class="uri">https://fs.r-lib.org/articles/function-comparisons.html</a></li>
<li><a href="https://livefreeordichotomize.com/2017/09/28/r-release-names/" class="uri">https://livefreeordichotomize.com/2017/09/28/r-release-names/</a></li>
<li><a href="https://stackoverflow.com/questions/13478375/is-there-any-authoritative-documentation-on-r-release-nicknames" class="uri">https://stackoverflow.com/questions/13478375/is-there-any-authoritative-documentation-on-r-release-nicknames</a></li>
<li><a href="http://www2.imm.dtu.dk/courses/02333/cygwin_tutorial/index.html" class="uri">http://www2.imm.dtu.dk/courses/02333/cygwin_tutorial/index.html</a></li>
<li><a href="https://tutorial.djangogirls.org/en/intro_to_command_line/" class="uri">https://tutorial.djangogirls.org/en/intro_to_command_line/</a></li>
<li><a href="https://ss64.com/" class="uri">https://ss64.com/</a></li>
<li><a href="https://www.learnenough.com/command-line-tutorial" class="uri">https://www.learnenough.com/command-line-tutorial</a></li>
</ul>
</div>
<div id="feedback" class="section level2">
<h2>Feedback</h2>
<p>If you see mistakes or want to suggest changes, please create an issue on the
<a href="https://github.com/rsquaredacademy-infra/blog" target="_blank">source
repository</a> or reach out to us at <a href="mailto:support@rsquaredacademy.com" class="email">support@rsquaredacademy.com</a>.</p>
<!-- clean up folder structure -->
</div>
