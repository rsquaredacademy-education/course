---
title: "Databases & R - Visualize Data using dbplot"
author: Aravind Hebbali
twitterImg: /img/dbi_cover_image.png
description: "Learn to connect, explore and query database from R"
date: '2019-08-05'
slug: visualize-database-dbplot
categories:
  - databases
tags:
  - dbi
  - dbplot
---



<p><img src="/img/dbi_cover_image.png" width="100%" style="display: block; margin: auto;" /></p>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>In this tutorial, we will learn to visualize data with dbplot.</p>
</div>
<div id="resources" class="section level2">
<h2>Resources</h2>
<p>Below are the links to all the resources related to this post:</p>
<ul>
<li><a href="https://slides.rsquaredacademy.com/sql/sqlite.html#/section" target="_blank">Slides</a></li>
<li><a href="https://github.com/rsquaredacademy-education/online-courses/" target="_blank">Code &amp; Data</a></li>
<li><a href="https://rstudio.cloud/project/430439" target="_blank">RStudio Cloud</a></li>
</ul>
<p>You can try our <strong>free online course</strong> <a href="https://rsquared-academy.thinkific.com/courses/working-with-databases-using-r"><strong>Working with Databases using R</strong></a> if you prefer to learn through self paced online courses.</p>
{{% youtube "bPlGPmjPFeU" %}}
</div>
<div id="libraries" class="section level2">
<h2>Libraries</h2>
<p>Before we connect to and explore the local SQLite database, let us take a look at the R packages we will use in this post.</p>
<ul>
<li><a href="http://r-dbi.github.io/DBI/">DBI</a> a database interface for R</li>
<li><a href="https://dbplyr.tidyverse.org/">dbplyr</a> a dplyr backend for databases</li>
<li><a href="https://dplyr.tidyverse.org/">dplyr</a> for querying data</li>
<li><a href="https://edgararuiz.github.io/dbplot/">dbplot</a> &amp; <a href="https://ggplot2.tidyverse.org/">ggplot2</a> for data visualization</li>
</ul>
<pre class="r"><code># install.packages(c(&quot;DBI&quot;, &quot;dbplyr&quot;, &quot;dplyr&quot;, &quot;dbplot&quot;, &quot;ggplot2&quot;, &quot;modeldb&quot;,
# &quot;tidypredict&quot;, &quot;config&quot;))
library(DBI)
library(dbplyr)
library(dplyr)
library(dbplot)
library(ggplot2)
library(modeldb)
library(tidypredict)
library(config)</code></pre>
<p>If you do not have all the above packages installed, go ahead and install them. In the R script we are sharing with you, we have commented out the code for installing the packages. If you are using the RStudio Cloud project, we have already installed the packages in the project and you can just load them into the R session using <code>library()</code>.</p>
<p>As and when we come to the specific sections where we are using these packages, they will be reintroduced and we will look at their documentation and explore the functions we will use.</p>
</div>
<div id="data-visualization" class="section level2">
<h2>Data Visualization</h2>
<p><a href="https://edgararuiz.github.io/dbplot/index.html">dbplot</a> leverages dplyr to process the underlying data computations of a plot inside a database. It uses ggplot2 to generate the following plots:</p>
<ul>
<li>box plot</li>
<li>bar plot</li>
<li>histogram</li>
<li>line chart</li>
<li>raster plot</li>
</ul>
<p>Some of the plots work with only Hive or Sparklyr connections. You can refere to the documentation for more details. Since we are dealing with a SQLite database, we will be able to generate the following plots.</p>
<div id="bar-plot" class="section level4">
<h4>Bar Plot</h4>
<pre class="r"><code>ecom2 %&gt;% 
  dbplot::dbplot_bar(device) + 
  ggplot2::xlab(&quot;Device&quot;) + 
  ggplot2::ylab(&quot;Count&quot;) + 
  ggplot2::ggtitle(&quot;Device Distribution&quot;)</code></pre>
<p><img src="/post/2019-08-05-working-with-databases-using-r-part-5_files/figure-html/dbplot1-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="line-chart" class="section level4">
<h4>Line Chart</h4>
<pre class="r"><code>ecom2 %&gt;% 
  dbplot::dbplot_line(n_visit) + 
  ggplot2::xlab(&quot;Visits&quot;) + 
  ggplot2::ylab(&quot;Count&quot;) </code></pre>
<p><img src="/post/2019-08-05-working-with-databases-using-r-part-5_files/figure-html/dbplot2-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="your-turn" class="section level3">
<h3>Your Turn</h3>
<ul>
<li>create bar plot of <code>referrer</code> column from the <code>trade</code> table</li>
<li>create line chart of <code>n_visit</code> column from the <code>trade</code> table</li>
</ul>
</div>
</div>
