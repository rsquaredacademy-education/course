---
title: "Command Line - File Compression"
author: Aravind Hebbali
twitterImg: /img/cline_cover_image.png
description: "Getting Started with the Command Line"
date: '2019-10-23'
slug: command-line-file-compression
categories:
  - bash
tags:
  - bash
  - shell
  - terminal
  - cli
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/bsTable/bootstrapTable.min.css" rel="stylesheet" />


<p><img src="/img/cline_cover_image.png" width="70%" style="display: block; margin: auto;" /></p>
<p>This is the seventh tutorial in the series <a href="https://tutorials.rsquaredacademy.com/command-line/index.html">Command Line Basics for R Users</a>. In this tutorial, we will learn about file compression.</p>
<div id="resources" class="section level2">
<h2>Resources</h2>
<p>Below are the links to all the resources related to this tutorial:</p>
<ul>
<li><a href="https://slides.rsquaredacademy.com/github/shell.pdf" target="_blank">Slides</a></li>
<li><a href="https://github.com/rsquaredacademy-education/online-courses/" target="_blank">Code &amp; Data</a></li>
<li><a href="https://rstudio.cloud/project/518720" target="_blank">RStudio Cloud</a></li>
</ul>
<p>You can try our <strong>free online course</strong> <a href="https://rsquared-academy.thinkific.com/courses/command-line-basics-for-r-users"><strong>Command Line Basics for R Users</strong></a> if you prefer to learn through self paced online courses or our <a href="https://bash-intro.rsquaredacademy.com"><strong>ebook</strong></a> if you like to read the tutorial in a book format.</p>
</div>
<div id="compress" class="section level2">
<h2>File Compression</h2>
{{% youtube "ucF-wwfmAwM" %}}
<div id="tar" class="section level3">
<h3>tar</h3>
<p>The <code>tar</code> command is used for file compression. It works with both <code>tar</code> and
<code>tar.gz</code> extensions. It is used to</p>
<ul>
<li>list files</li>
<li>extract files</li>
<li>create archives</li>
<li>append file to existing archives</li>
</ul>
<p><code>tar</code> creates, maintains, modifies, and extracts files that are archived in the tar format. Tar stands for <strong>t</strong>ape <strong>ar</strong>chive and is an archiving file format.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Command
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>tar tvf</code>
</td>
<td style="text-align:left;">
List an archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar tvfz</code>
</td>
<td style="text-align:left;">
List a gzipped archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar xvf</code>
</td>
<td style="text-align:left;">
Extract an archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar xvfz</code>
</td>
<td style="text-align:left;">
Extract a gzipped archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar cvf</code>
</td>
<td style="text-align:left;">
Create an uncompressed tar archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar cvfz</code>
</td>
<td style="text-align:left;">
Create a tar gzipped archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar rvf</code>
</td>
<td style="text-align:left;">
Add a file to an existing archive
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar rvfz</code>
</td>
<td style="text-align:left;">
Add a file to an existing gzipped archive
</td>
</tr>
</tbody>
</table>
<p>We will use different options along with the <code>tar</code> command for listing, extracting, creating and adding files. The <code>vf</code> (<strong>v</strong> stands for verbosely show .tar file progress and <strong>f</strong> stands for file name type of the archive file) option is common for all the above operations while the following are specific.</p>
<ul>
<li><code>t</code> for listing</li>
<li><code>x</code> for extracting</li>
<li><code>c</code> for creating</li>
<li><code>r</code> for adding files</li>
</ul>
<p>While dealing with <code>tar.gz</code> archives we will use <code>z</code> in addition to <code>vf</code> and the above options.</p>
<div id="list" class="section level4">
<h4>List</h4>
<p>Let us list all the files &amp; folders in <code>release_names.tar</code>. As mentioned above. to list the files in the archive, we use the <code>t</code> option.</p>
<pre class="bash"><code>tar -tvf release_names.tar </code></pre>
<pre><code>## -rwxrwxrwx aravind/aravind 546 2019-09-16 15:59 release_names.txt
## -rwxrwxrwx aravind/aravind  65 2019-09-16 15:58 release_names_18.txt
## -rwxrwxrwx aravind/aravind  53 2019-09-16 15:59 release_names_19.txt</code></pre>
</div>
<div id="extract" class="section level4">
<h4>Extract</h4>
<p>Let us extract files from <code>release_names.tar</code> using the <code>x</code> option in addition to <code>vf</code>.</p>
<pre class="bash"><code>tar -xvf release_names.tar 
ls</code></pre>
<pre><code>## release_names.txt
## release_names_18.txt
## release_names_19.txt
## analysis.R
## bash-tutorial
## bash.R
## bash.Rmd
## bash.html
## bash.sh
## imports_blorr.txt
## imports_olsrr.txt
## lorem-ipsum.txt
## main_project.zip
## myfiles
## mypackage
## myproject
## myproject.zip
## myproject3
## myproject4
## package_names.txt
## packproj.zip
## pkg_names.tar
## pkg_names.txt
## r
## r2
## r_releases
## release_names.tar
## release_names.tar.gz
## release_names.txt
## release_names_18.txt
## release_names_18_19.txt
## release_names_19.txt
## releases.txt.gz
## sept_15.csv
## sept_15.csv.gz
## urls.txt
## zip_example.zip</code></pre>
</div>
<div id="add" class="section level4">
<h4>Add</h4>
<p>To add a file to an existing archive, use the <code>r</code> option. Let us add <code>release_names_18.txt</code> and <code>release_names_19.txt</code> to the archive we created in the previous step.</p>
<pre class="bash"><code>tar -rvf release_names.tar release_names_18.txt release_names_19.txt</code></pre>
<pre><code>## release_names_18.txt
## release_names_19.txt</code></pre>
</div>
<div id="create" class="section level4">
<h4>Create</h4>
<p>Using the <code>c</code> option we can create tar archives. In the below example, we are using a single file but you can specify multiple files and folders as well.</p>
<pre class="bash"><code>tar -cvf pkg_names.tar pkg_names.txt</code></pre>
<pre><code>## pkg_names.txt</code></pre>
</div>
</div>
<div id="gzip" class="section level3">
<h3>gzip</h3>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Command
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>gzip</code>
</td>
<td style="text-align:left;">
Compress a file
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>gzip -d</code>
</td>
<td style="text-align:left;">
Decompress a file
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>gzip -c</code>
</td>
<td style="text-align:left;">
Compress a file and specify the output file name
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>zip -r</code>
</td>
<td style="text-align:left;">
Compress a directory
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>zip</code>
</td>
<td style="text-align:left;">
Add files to an existing zip file
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip</code>
</td>
<td style="text-align:left;">
Extract files from a zip files
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip -d</code>
</td>
<td style="text-align:left;">
Extract files from a zip file and specify the output file name
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip -l</code>
</td>
<td style="text-align:left;">
List contents of a zip file
</td>
</tr>
</tbody>
</table>
<p><code>gzip</code>, <code>gunzip</code>, and <code>zcat</code> commands are used to compress or expand files in the GNU GZIP format i.e. files with <code>.gz</code> extension</p>
<div id="compress-1" class="section level4">
<h4>Compress</h4>
<p>Let us compress <code>release_names.txt</code> file using <code>gzip</code>.</p>
<pre class="bash"><code>gzip release_names.txt
ls</code></pre>
<pre><code>## analysis.R
## bash-tutorial
## bash.R
## bash.Rmd
## bash.html
## bash.sh
## imports_blorr.txt
## imports_olsrr.txt
## lorem-ipsum.txt
## main_project.zip
## myfiles
## mypackage
## myproject
## myproject.zip
## myproject3
## myproject4
## package_names.txt
## packproj.zip
## pkg_names.tar
## pkg_names.txt
## r
## r2
## r_releases
## release_names.tar
## release_names.tar.gz
## release_names.txt.gz
## release_names_18.txt
## release_names_18_19.txt
## release_names_19.txt
## releases.txt.gz
## sept_15.csv
## sept_15.csv.gz
## urls.txt
## zip_example.zip</code></pre>
</div>
<div id="decompress" class="section level4">
<h4>Decompress</h4>
<p>Use the <code>-d</code> option with <code>gzip</code> to decompress a file. In the below example, we decompress the <code>sept_15.csv.gz</code> file (downloaded using <code>wget</code> or <code>curl</code> earlier). You can also use <code>gunzip</code> for the same result.</p>
<pre class="bash"><code>gzip -d sept_15.csv.gz
ls</code></pre>
<pre><code>## gzip: sept_15.csv already exists;    not overwritten
## analysis.R
## bash-tutorial
## bash.R
## bash.Rmd
## bash.html
## bash.sh
## imports_blorr.txt
## imports_olsrr.txt
## lorem-ipsum.txt
## main_project.zip
## myfiles
## mypackage
## myproject
## myproject.zip
## myproject3
## myproject4
## package_names.txt
## packproj.zip
## pkg_names.tar
## pkg_names.txt
## r
## r2
## r_releases
## release_names.tar
## release_names.tar.gz
## release_names.txt
## release_names_18.txt
## release_names_18_19.txt
## release_names_19.txt
## releases.txt.gz
## sept_15.csv
## sept_15.csv.gz
## urls.txt
## zip_example.zip</code></pre>
</div>
<div id="specify-filename" class="section level4">
<h4>Specify Filename</h4>
<p>Use <code>-c</code> and <code>&gt;</code> to specify a different file name while compressing using <code>gzip</code>. In the below example, <code>gzip</code> will create <code>releases.txt.gz</code> instead of <code>release_names.txt.gz</code>.</p>
<pre class="bash"><code>gzip -c release_names.txt &gt; releases.txt.gz
ls</code></pre>
<pre><code>## analysis.R
## bash-tutorial
## bash.R
## bash.Rmd
## bash.html
## bash.sh
## imports_blorr.txt
## imports_olsrr.txt
## lorem-ipsum.txt
## main_project.zip
## myfiles
## mypackage
## myproject
## myproject.zip
## myproject3
## myproject4
## package_names.txt
## packproj.zip
## pkg_names.tar
## pkg_names.txt
## r
## r2
## r_releases
## release_names.tar
## release_names.tar.gz
## release_names.txt
## release_names_18.txt
## release_names_18_19.txt
## release_names_19.txt
## releases.txt.gz
## sept_15.csv
## sept_15.csv.gz
## urls.txt
## zip_example.zip</code></pre>
</div>
</div>
<div id="zip-unzip" class="section level3">
<h3>zip &amp; unzip</h3>
<p><code>zip</code> creates ZIP archives while <code>unzip</code> lists and extracts compressed files in a ZIP archive.</p>
<div id="list-1" class="section level4">
<h4>List</h4>
<p>Let us list all the files and folders in <code>main_project.zip()</code> using <code>unzip</code> and the <code>-l</code> option.</p>
<pre class="bash"><code>unzip -l main_project.zip</code></pre>
<pre><code>## Archive:  main_project.zip
##   Length      Date    Time    Name
## ---------  ---------- -----   ----
##         0  2019-09-23 18:07   myproject/
##         0  2019-09-20 14:02   myproject/.gitignore
##         0  2019-09-23 18:07   myproject/data/
##         0  2019-09-20 14:02   myproject/data/processed/
##         0  2019-09-20 14:02   myproject/data/raw/
##         0  2019-09-20 14:02   myproject/output/
##         0  2019-09-20 14:02   myproject/README.md
##        13  2019-09-20 14:02   myproject/run_analysis.R
##         0  2019-09-20 14:02   myproject/src/
##         0  2019-09-23 18:07   mypackage/
##         0  2019-09-20 14:11   mypackage/.gitignore
##         0  2019-09-20 14:11   mypackage/.Rbuildignore
##         0  2019-09-20 14:10   mypackage/data/
##         0  2019-09-20 14:11   mypackage/DESCRIPTION
##         0  2019-09-20 14:10   mypackage/docs/
##         0  2019-09-20 14:11   mypackage/LICENSE
##         0  2019-09-20 14:10   mypackage/man/
##         0  2019-09-20 14:11   mypackage/NAMESPACE
##         0  2019-09-20 14:11   mypackage/NEWS.md
##         0  2019-09-20 14:10   mypackage/R/
##         0  2019-09-20 14:11   mypackage/README.md
##         0  2019-09-20 14:11   mypackage/src/
##         0  2019-09-20 14:10   mypackage/tests/
##         0  2019-09-20 14:10   mypackage/vignettes/
##         0  2019-09-23 18:07   myfiles/
##        12  2019-09-20 15:30   myfiles/analysis.R
##         7  2019-09-20 15:31   myfiles/NEWS.md
##         9  2019-09-20 15:31   myfiles/README.md
##       546  2019-09-20 15:29   myfiles/release_names.txt
##        65  2019-09-20 15:29   myfiles/release_names_18.txt
##        53  2019-09-20 15:30   myfiles/release_names_19.txt
##        12  2019-09-20 15:30   myfiles/visualization.R
##     15333  2019-10-01 16:58   bash.sh
##         0  2019-09-16 12:42   r/
## ---------                     -------
##     16050                     34 files</code></pre>
</div>
<div id="extract-1" class="section level4">
<h4>Extract</h4>
<p>Using <code>unzip</code>, let us now extract files and folders from <code>zip_example.zip</code>.</p>
<pre class="bash"><code>unzip zip_example.zip</code></pre>
<p>Using the <code>-d</code> option, we can extract the contents of <code>zip_example.zip</code> to a specific folder. In the below example, we extract it to a new folder <code>examples</code>.</p>
<pre class="bash"><code>unzip zip_example.zip –d myexamples</code></pre>
</div>
<div id="compress-2" class="section level4">
<h4>Compress</h4>
<p>Use the <code>-r</code> option along with <code>zip</code> to create a ZIP archive. In the below example, we create a ZIP archive of <code>myproject</code> folder.</p>
<pre class="bash"><code>zip -r myproject.zip myproject
ls</code></pre>
<pre><code>## updating: myproject/ (stored 0%)
## updating: myproject/.gitignore (stored 0%)
## updating: myproject/data/ (stored 0%)
## updating: myproject/data/processed/ (stored 0%)
## updating: myproject/data/raw/ (stored 0%)
## updating: myproject/output/ (stored 0%)
## updating: myproject/README.md (stored 0%)
## updating: myproject/run_analysis.R (stored 0%)
## updating: myproject/src/ (stored 0%)</code></pre>
<p>We can compress multiple directories using <code>zip</code>. The names of the directories must be separated by a space as shown in the below example where we compress <code>myproject</code> and <code>mypackage</code> into a single ZIP archive.</p>
<pre class="bash"><code>zip -r packproj.zip myproject mypackage
ls</code></pre>
<pre><code>## updating: myproject/ (stored 0%)
## updating: myproject/.gitignore (stored 0%)
## updating: myproject/data/ (stored 0%)
## updating: myproject/data/processed/ (stored 0%)
## updating: myproject/data/raw/ (stored 0%)
## updating: myproject/output/ (stored 0%)
## updating: myproject/README.md (stored 0%)
## updating: myproject/run_analysis.R (stored 0%)
## updating: myproject/src/ (stored 0%)
## updating: mypackage/ (stored 0%)
## updating: mypackage/.gitignore (stored 0%)
## updating: mypackage/.Rbuildignore (stored 0%)
## updating: mypackage/data/ (stored 0%)
## updating: mypackage/DESCRIPTION (stored 0%)
## updating: mypackage/docs/ (stored 0%)
## updating: mypackage/LICENSE (stored 0%)
## updating: mypackage/man/ (stored 0%)
## updating: mypackage/NAMESPACE (stored 0%)
## updating: mypackage/NEWS.md (stored 0%)
## updating: mypackage/R/ (stored 0%)
## updating: mypackage/README.md (stored 0%)
## updating: mypackage/src/ (stored 0%)
## updating: mypackage/tests/ (stored 0%)
## updating: mypackage/vignettes/ (stored 0%)</code></pre>
</div>
<div id="add-1" class="section level4">
<h4>Add</h4>
<p>To add a new file/folder to an existing archive, specify the name of the archive followed by the name of the file or the folder. In the below example, we add the <code>bash.sh</code> file to the <code>myproject.zip</code> archive created in a previous step.</p>
<pre class="bash"><code>zip myproject.zip bash.sh</code></pre>
<pre><code>## updating: bash.sh (deflated 78%)</code></pre>
</div>
</div>
<div id="r-functions" class="section level3">
<h3>R Functions</h3>
<div id="tar-tar.gz" class="section level4">
<h4>tar &amp; tar.gz</h4>
<p>In R, we can use the <code>tar()</code> and <code>untar()</code> functions from the <code>utils</code> package to handle <code>.tar</code> and <code>.tar.gz</code> archives.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Command
</th>
<th style="text-align:left;">
R
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>tar tvf</code>
</td>
<td style="text-align:left;">
<code>utils::untar('archive.tar', list = TRUE)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar tvfz</code>
</td>
<td style="text-align:left;">
<code>utils::untar('archive.tar.gz', list = TRUE)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar xvf</code>
</td>
<td style="text-align:left;">
<code>utils::untar('archive.tar')</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar xvfz</code>
</td>
<td style="text-align:left;">
<code>utils::untar('archive.tar.gz')</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar cvf</code>
</td>
<td style="text-align:left;">
<code>utils::tar('archive.tar')</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>tar cvfz</code>
</td>
<td style="text-align:left;">
<code>utils::tar('archive.tar', compression = 'gzip')</code>
</td>
</tr>
</tbody>
</table>
</div>
<div id="zip-gzip" class="section level4">
<h4>zip &amp; gzip</h4>
<p>The <a href="https://cran.r-project.org/package=zip">zip</a> package has the functionalities to handle ZIP archives. The <code>tar()</code> and <code>untar()</code> functions from the <code>utils</code> package can handle GZIP archives.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Command
</th>
<th style="text-align:left;">
R
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>gzip</code>
</td>
<td style="text-align:left;">
<code>utils::tar(compression = 'gzip'</code> / <code>R.utils::gzip()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>gzip -d</code>
</td>
<td style="text-align:left;">
<code>utils::untar()</code> / <code>R.utils::gunzip()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>gzip -c</code>
</td>
<td style="text-align:left;">
<code>utils::untar(exdir = filename)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>zip -r</code>
</td>
<td style="text-align:left;">
<code>zip::zip()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>zip</code>
</td>
<td style="text-align:left;">
<code>zip::zipr_append()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip</code>
</td>
<td style="text-align:left;">
<code>zip::unzip()</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip -d</code>
</td>
<td style="text-align:left;">
<code>zip::unzip(exdir = dir_name)</code>
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>unzip -l</code>
</td>
<td style="text-align:left;">
<code>zip::zip_list()</code>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="feedback" class="section level2">
<h2>Feedback</h2>
<p>If you see mistakes or want to suggest changes, please create an issue on the
<a href="https://github.com/rsquaredacademy-infra/blog" target="_blank">source
repository</a> or reach out to us at <a href="mailto:support@rsquaredacademy.com" class="email">support@rsquaredacademy.com</a>.</p>
<!-- clean up folder structure -->
</div>
